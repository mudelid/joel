<!doctype html>
<html lang="et">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JOELI KOLLEKTSIOON</title>
  <style>
@font-face {
  font-family: 'BebasKai';
  src: url('fonts/bebaskai.woff2') format('woff2'),
       url('fonts/bebaskai.woff') format('woff');
  font-weight: normal;
  font-style: normal;
}
:root{
  --bg:#FFFFFF; --panel:#FFFFFF; --text:#000000; --muted:#000000;
  --border:#000000; --link:#000000; --maxw:500px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:url("img/taust3.jpg?v=2") no-repeat center center fixed;
  background-size:cover;
  color:var(--text);
  font-family:'BebasKai',sans-serif;
  font-size:30px;
}
.logo{position:fixed;top:12px;left:12px;width:100px;height:100px;
  border-radius:7px;object-fill:cover;border:1px solid var(--border);background:#fff}
header{max-width:var(--maxw);margin:60px auto 10px;padding:0 16px}
h1{margin:0 0 6px;font-size:50px;}
p.lead{margin:0;color:var(--muted)}
footer{max-width:var(--maxw);margin:0 auto 40px;padding:0 16px;
  color:var(--muted);font-size:22px}

@media(max-width:600px){
  .logo{display:block;width:40px;height:40px;margin:8px 0 0 8px;}
  header{margin-top:12px;}
  h1{font-size:28px;}
  .lead{font-size:14px;}
}

/* otsing */
.search{max-width:var(--maxw);margin:10px auto 0;padding:0 16px;}
.search input{
  width:90%;font:16px/1.3 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  padding:10px 12px;border:1px solid var(--border);border-radius:10px;
}

/* KÃ•IK MUDELID nupp â€” lai, valge taust, hall tekst */
.cta-wrap{
  max-width:1200px;
  margin:24px auto 24px;
  padding:0 16px;
  text-align:center;
}
.cta-btn{
  display:inline-block;
  width:100%;
  max-width:500px;       /* piiratud, et mobiilis ei oleks liiga lai */
  padding:16px 24px;
  border-radius:14px;
  background:#ffffff;
  color:#000000;
  font-family:'BebasKai', sans-serif;
  font-size:28px;
  letter-spacing:0.5px;
  text-decoration:none;
  border:1px solid var(--border);
  transition:background .2s, transform .2s;
}
.cta-btn:hover{
  background:#f2f2f2;
  transform:translateY(-2px);
}

/* mobiilivaates veidi vÃ¤iksem */
@media (max-width:600px){
  .cta-btn{
    font-size:22px;
    padding:14px 18px;
    border-radius:10px;
  }
}


/* Hiljuti lisatud kaardid */
.recent-wrap{max-width:1200px;margin:12px auto 24px;padding:0 16px;}
.recent-wrap h3{margin:0 0 8px;font-size:22px;}
.recent-grid{
  display:grid;gap:12px;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
}
.recent-card{
  background:#fff;border:1px solid var(--border);border-radius:12px;
  overflow:hidden;text-decoration:none;color:var(--text);
}
.recent-card .thumb{aspect-ratio:4/3;width:100%;object-fit:cover;display:block;background:#222;}
.recent-card .meta{padding:8px 10px;font-size:18px;line-height:1.2;}
.recent-card .meta .brand{opacity:.7;font-size:12px;}

/* TOP kÃ¼lgriba */
.sidebar-standalone{
  max-width:var(--maxw);margin:12px auto 24px;
  background:#ffffffcc;backdrop-filter:blur(6px);
  border:1px solid var(--border);border-radius:16px;
  padding:12px 14px;box-shadow:0 2px 10px rgba(0,0,0,.08);
  font-size:18px;line-height:1.25;
}
.sidebar-standalone h3{margin:0 0 8px;font-size:22px;}
.sidebar-standalone ol{list-style:none;margin:8px 0 0;padding:0;}
.sidebar-standalone li{
  display:flex;justify-content:space-between;gap:10px;align-items:baseline;
  padding:6px 0;border-bottom:1px solid var(--border);
}
.sidebar-standalone li:last-child{border-bottom:0;}
.sidebar-standalone .names a{color:var(--link);text-decoration:none;}
.sidebar-standalone .names a:hover{text-decoration:underline;}
.sidebar-standalone .count{opacity:.7;}

/* ðŸ”¹ Kompaktsemad "Hiljuti lisatud" kaardid avalehel */
.recent-grid {
  gap: 8px;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); /* vÃ¤iksemad kaardid */
}

.recent-card {
  border-radius: 10px;
  border: 1px solid var(--border);
}

.recent-card .thumb {
  aspect-ratio: 4/3;
  width: 100%;
  object-fit: cover;
  display: block;
  background: #222;
  transform: scale(0.95);          /* pilt visuaalselt vÃ¤iksem */
  border-radius: 6px;
  transition: transform .2s ease;
}

.recent-card:hover .thumb {
  transform: scale(0.98);
}

.recent-card .meta {
  padding: 6px 8px;                /* vÃ¤hem paddingut */
  font-size: 18px;                 /* sama suur tekst */
  line-height: 1.2;
}

.recent-card .meta .brand {
  font-size: 12px;
  opacity: .7;
}

/* ðŸ”¸ mobiilis veel veidi tihedam */
@media (max-width: 600px) {
  .recent-grid {
    gap: 6px;
    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
  }
  .recent-card .meta {
    padding: 5px 6px;
    font-size: 16px;
  }
}

  </style>

</head>

<body>

  <img class="logo" src="img/logo2.png" alt="Logo" onerror="this.remove()"/>

<header>

  <h1>JOELI MUDELIKOLLEKTSIOON</h1>
  <p class="lead">KOKKU ERINEVAID MUDELEID: <span id="count">0</span></p>
  <div class="search">
    <input id="brandSearch" type="search" placeholder="Otsiâ€¦" autocomplete="off">
  </div>

</header>

<section id="recent" class="recent-wrap">
  <h3>Hiljuti lisatud</h3>
  <div class="recent-grid" id="recentGrid"></div>
</section>

<div class="cta-wrap">
  <a href="mudelid.html" class="cta-btn">KÃ•IK MUDELID</a>
</div>

<aside id="top-brands-sidebar" class="sidebar-standalone"></aside>

<footer>Â© JOEL-MARK STOMMA <span id="year"></span></footer>
<script>document.getElementById('year').textContent=new Date().getFullYear();</script>

<!-- Otsing viib mudelid.html?q=... -->
<script>
(()=>{const i=document.getElementById('brandSearch');if(!i)return;
function go(q){const u=new URL('mudelid.html',location.href);
if(q.trim())u.searchParams.set('q',q.trim());location.href=u.href;}
i.addEventListener('keydown',e=>{
if(e.key==='Enter'){go(i.value);}
if(e.key==='Escape'){i.value='';i.blur();}
});})();
</script>

<!-- TOP tabel mudelid.html-ist -->
<script>
(async()=>{
const sb=document.getElementById('top-brands-sidebar');
if(sb)sb.innerHTML=`<h3>TOP 10</h3><ol id="top-list"></ol>`;
const list=document.getElementById('top-list');
let total=0;const brands=[];
if(location.protocol==='file:'){
if(list)list.innerHTML='<li><span class="names">Ava http serveris</span></li>';return;}
let html='';try{const r=await fetch('mudelid.html',{cache:'no-store'});
if(!r.ok)throw 0;html=await r.text();}catch{if(list)list.innerHTML='<li><span>Ei saanud mudelid.html</span></li>';return;}
const doc=new DOMParser().parseFromString(html,'text/html');
const cards=[...doc.querySelectorAll('.brand-card')];
await Promise.all(cards.map(async c=>{
const href=c.getAttribute('href');
const name=(c.querySelector('.brand-name')?.textContent||'').trim();
if(!href)return;
try{
const r=await fetch(href,{cache:'no-store'});if(!r.ok)return;
const h=await r.text();const d=new DOMParser().parseFromString(h,'text/html');
let n=d.querySelectorAll('.card').length;
if(!n){const m=d.querySelector('meta[name="models-count"]');
if(m)n=parseInt(m.content)||0;}
total+=n;brands.push({name,href,count:n});
}catch{}
}));
document.getElementById('count').textContent=total;
brands.sort((a,b)=>(b.count-a.count)||a.name.localeCompare(b.name));
const top=brands.slice(0,10);
list.innerHTML=top.map(x=>`
<li><span class="names"><a href="${x.href}">${x.name}</a></span>
<span class="count">${x.count}</span></li>`).join('')||
'<li><span>Andmeid ei leitud</span></li>';
})();
</script>

<!-- Hiljuti lisatud mudelid mudelid.html-ist -->
<script>
(async()=>{
const grid=document.getElementById('recentGrid');
if(!grid||location.protocol==='file:')return;
let html='';
try{const r=await fetch('mudelid.html',{cache:'no-store'});
if(!r.ok)throw 0;html=await r.text();}catch{
grid.innerHTML='<div style="opacity:.7">Ei saanud mudelid.html lugeda.</div>';return;}
const doc=new DOMParser().parseFromString(html,'text/html');
const base=new URL(location.href);
const brands=[...doc.querySelectorAll('.brand-card[href]')].map(a=>({
href:new URL(a.getAttribute('href'),base).href,
name:(a.querySelector('.brand-name')?.textContent||'').trim()
}));
const items=[];
await Promise.all(brands.map(async({href,name:brandName})=>{
try{
const r=await fetch(href,{cache:'no-store'});if(!r.ok)return;
const h=await r.text();const d=new DOMParser().parseFromString(h,'text/html');
const brand=d.querySelector('meta[name="brand"]')?.content?.trim()||brandName;
d.querySelectorAll('.card[data-added]').forEach(c=>{
const t=(c.querySelector('.title')?.textContent||'').trim();
const img=c.querySelector('.thumb')?.getAttribute('src')||'';
const a=c.getAttribute('data-added')||'';const ad=Date.parse(a);
if(!t||!img||isNaN(ad))return;
const full=new URL(img,href).href;
const u=new URL(href,base);u.searchParams.set('m',t);
items.push({brand,title:t,img:full,url:u.pathname+u.search,added:ad});
});}catch{} }));
if(!items.length){grid.innerHTML='<div style="opacity:.7">Hiljuti lisatud mudeleid ei leitud.</div>';return;}
items.sort((a,b)=>b.added-a.added);
const N=12;const recent=items.slice(0,N);
grid.innerHTML=recent.map(it=>`
<a class="recent-card" href="${it.url}">
<img class="thumb" src="${it.img}" alt="${it.title}" loading="lazy" decoding="async">
<div class="meta"><div class="title">${it.title}</div>
<div class="brand">${it.brand} â€¢ ${new Date(it.added).toLocaleDateString()}</div>
</div></a>`).join('');
})();
</script>
</body>
</html>
